var e=Object.defineProperty,t=Object.getOwnPropertySymbols,s=Object.prototype.hasOwnProperty,a=Object.prototype.propertyIsEnumerable,l=(t,s,a)=>s in t?e(t,s,{enumerable:!0,configurable:!0,writable:!0,value:a}):t[s]=a;import{r,_ as o}from"./index.24626b86.js";import{s as n}from"./request.10a66ff0.js";import{p as i,j as d,r as u,o as m,c,a as p,t as h,l as g,F as _,n as b,q as f,k as v,s as w}from"./vendor.02dbbba7.js";const y={data(){return{src:"/imgs/xiaohei.jpg",uname:"Linux 4.15.0-150-generic Unknow SMP Sat Jul 3 13:37:31 UTC 2021 x86_64 x86_64 x86_64 GNU/Linux",programmer_said:["选择你能够承担的，承担你已经选择的"],sayWhat:[],timer:null,userInfo:{username:"",nice_name:"",phone:"",group_name:"",register_time:"",login_time:""},dialogVisible:!1,ruleForm:{old_pwd:"",new_pwd1:"",new_pwd2:""},rules:{old_pwd:[{required:!0,message:"请输入旧密码",trigger:"blur"}],new_pwd1:[{required:!0,message:"请输入新密码",trigger:"blur"}],new_pwd2:[{required:!0,validator:(e,t,s)=>{""===t?s(new Error("请再次输入密码")):t!==this.ruleForm.new_pwd1?s(new Error("两次输入密码不一致!")):s()},trigger:"blur"}]},userID:0,menuShow:{show_menu_prometheus_cfg_manager:!1,show_menu_administrator_cfg_manager:!1}}},mounted(){this.initUserInfo(),this.goMenu(),this.switchSay(),null===this.timer&&this.setTimeer(),this.loadProgramerSay(this)},beforeUnmount(){clearInterval(this.timer),this.timer=null},methods:{initUserInfo(){if(this.$store.getters.userInfo){this.userID=this.$store.getters.userID;const e=this.$store.getters.userInfo;this.userInfo={id:this.$store.getters.userID,username:e.username,nice_name:e.nice_name,phone:e.phone,group_name:e.group_name,register_time:e.create_at,login_time:e.update_at}}},goMenu(){var e;n({url:"/v1/manager/user/menu/priv",method:"get",params:e}).then((e=>{this.menuShow=e.data})).catch((e=>{console.log(e)}))},goToConfig(){this.$router.push({name:"menu"})},goToAdmin(){this.$router.push({name:"admin"})},loadProgramerSay(){n({url:"/v1/txt/programer/say",method:"get"}).then((e=>{this.programmer_said=e.data.programer_say,this.uname=e.data.uname,this.switchSay()})).catch((e=>console.log(e)))},setTimeer(){this.timer=setInterval((()=>{this.switchSay()}),15e3)},switchSay(){const e=this.programmer_said[Math.floor(Math.random()*this.programmer_said.length)];this.sayWhat=[e]},fixedLengthFormatString(e,t){if(null==e||null==e)return null;if(!/^[0-9]*[1-9][0-9]*$/.test(t))return null;for(var s=new Array,a=e.length,l=0;l<a/t;l++)(l+1)*t>a?s.push(e.substring(l*t,a)):s.push(e.substring(l*t,(l+1)*t));return s},parseTimeSelf(e){var t=new Date(Date.parse(e));return t.toLocaleDateString()+" "+t.toTimeString().split(" ")[0]},changePassword(){this.dialogVisible=!0},quitLog(){this.$confirm("退出账号, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((()=>{n({url:"/v1/logout",method:"post"}).then((e=>{this.$notify({title:"成功",message:"退出成功！",type:"success"}),this.$store.dispatch("resetToken"),r(),this.$router.push({name:"login"})}))})).catch((()=>{this.$notify({title:"消息",message:"取消退出",type:"info"})}))},handleClose(){this.dialogVisible=!1},submitChangePassword(e){this.$refs[e].validate((e=>{if(e){const e=((e,r)=>{for(var o in r||(r={}))s.call(r,o)&&l(e,o,r[o]);if(t)for(var o of t(r))a.call(r,o)&&l(e,o,r[o]);return e})({},this.ruleForm);(r=e,n({url:"/v1/manager/user/password",method:"post",data:r})).then((e=>{this.$notify({title:"成功",message:"密码更新成功！",type:"success"}),this.dialogVisible=!1})).catch((e=>console.log(e)))}var r}))}}},x=v();i("data-v-40e5b639");const k={class:"person-board"},I={id:"box"},S={class:"meBox"},V=p("div",{class:"headPhoto"},null,-1),C={class:"meBox-title"},T=p("div",{class:"fg"},null,-1),F={class:"meBox-text"},$={class:"meBox-Button"},j={id:"cmdBox"},P={class:"cmd"},q=w('<div class="click" data-v-40e5b639><div class="red" data-v-40e5b639></div><div class="yellow" data-v-40e5b639></div><div class="green" data-v-40e5b639></div></div><div class="title" data-v-40e5b639><span data-v-40e5b639>root - bash</span></div>',2),U={class:"cmdText"},B=p("span",{style:{color:"rgb(0, 190, 0)"}},"root@monitor:~",-1),z=p("span",{style:{color:"blue"}},"# ",-1),D=p("span",{style:{color:"rgb(39, 39, 39)"}},"./tianqi.sh",-1),O=p("br",null,null,-1),L=p("iframe",{scrolling:"no",src:"https://tianqiapi.com/api.php?style=tc&skin=pitaya",frameborder:"0",width:"350",height:"24",allowtransparency:"true"},null,-1),M=p("br",null,null,-1),A=p("span",{style:{color:"rgb(0, 190, 0)"}},"root@monitor:~",-1),E=p("span",{style:{color:"blue"}},"# ",-1),W=p("span",{style:{color:"rgb(39, 39, 39)"}},"uname",-1),G=p("br",null,null,-1),J=p("span",{style:{color:"rgb(0, 190, 0)"}},"root@monitor:~",-1),N=p("span",{style:{color:"blue"}},"# ",-1),H=p("span",{style:{color:"rgb(39, 39, 39)"}},"cat ./quotes_by_famous_people.txt",-1),K=p("br",null,null,-1),Q=p("span",{style:{color:"rgb(0, 190, 0)"}},"root@monitor:~",-1),R=p("span",{style:{color:"blue"}},"# ",-1),X=p("span",{style:{color:"rgb(39, 39, 39)"}},"sudo rm -rf /过去的自己/*",-1),Y={class:"cmd cmd2"},Z=w('<div class="click" data-v-40e5b639><div class="red" data-v-40e5b639></div><div class="yellow" data-v-40e5b639></div><div class="green" data-v-40e5b639></div></div><div class="title" data-v-40e5b639><span data-v-40e5b639>root - bash</span></div>',2),ee={class:"cmdText"},te=p("span",{style:{color:"rgb(0, 190, 0)"}},"root@monitor:~",-1),se=p("span",{style:{color:"blue"}},"# ",-1),ae=p("span",{style:{color:"rgb(39, 39, 39)"}},"awk '/menu/' ./prometheus.yml",-1),le=p("p",{class:"prompt-text"},"点击下面菜单进入：",-1),re={key:0},oe=g("Prometheus配置"),ne={key:1,class:"menu_zero_padding"},ie=g("用户及权限管理"),de={key:2},ue={class:"no_menu_show"},me=g("没有可供显示的菜单"),ce=p("span",{style:{color:"rgb(0, 190, 0)"}},"root@monitor:~",-1),pe=p("span",{style:{color:"blue"}},"# ",-1),he=g("取 消"),ge=g("确 定");d();const _e=x(((e,t,s,a,l,r)=>{const n=u("el-descriptions-item"),i=u("el-descriptions"),d=o,v=u("el-button"),w=u("el-tag"),y=u("el-input"),_e=u("el-form-item"),be=u("el-form"),fe=u("el-dialog");return m(),c("div",k,[p("div",I,[p("div",S,[V,p("div",C,[p("p",null,"您好，"+h(l.userInfo.nice_name),1),T]),p("div",F,[p(i,{title:"",column:1,size:""},{default:x((()=>[p(n,{label:"登录账号"},{default:x((()=>[g(h(l.userInfo.username),1)])),_:1}),p(n,{label:"手机号"},{default:x((()=>[g(h(l.userInfo.phone),1)])),_:1}),p(n,{label:"所属组"},{default:x((()=>[g(h(l.userInfo.group_name),1)])),_:1}),p(n,{label:"注册时间"},{default:x((()=>[g(h(r.parseTimeSelf(l.userInfo.register_time)),1)])),_:1}),p(n,{label:"登录时间"},{default:x((()=>[g(h(r.parseTimeSelf(l.userInfo.login_time)),1)])),_:1})])),_:1})]),p("div",$,[p("a",{href:"javascript:void(0)",onClick:t[1]||(t[1]=e=>r.changePassword())},"更改密码"),p("a",{href:"javascript:void(0)",onClick:t[2]||(t[2]=e=>r.quitLog())},"退出登录")])]),p("div",j,[p("div",P,[q,p("div",U,[B,z,D,O,L,M,A,E,W,p("p",null,h(l.uname),1),G,J,N,H,(m(!0),c(_,null,b(l.sayWhat,((e,t)=>(m(),c("p",{key:t},h(e),1)))),128)),K,Q,R,X])]),p("div",Y,[Z,p("div",ee,[te,se,ae,le,p("dl",null,[!0===l.menuShow.show_menu_prometheus_cfg_manager?(m(),c("dt",re,[p(v,{type:"text",onClick:r.goToConfig},{default:x((()=>[p(d,{"icon-class":"xianrenzhang"}),oe])),_:1},8,["onClick"])])):f("",!0),!0===l.menuShow.show_menu_administrator_cfg_manager?(m(),c("dt",ne,[p(d,{"icon-class":"yezhi"}),p(v,{type:"text",onClick:r.goToAdmin},{default:x((()=>[ie])),_:1},8,["onClick"])])):f("",!0),0===Object.keys(l.menuShow).length?(m(),c("dt",de,[p("div",ue,[p(w,{type:"warning",size:"small"},{default:x((()=>[p(d,{"icon-class":"shuzhi"}),me])),_:1})])])):f("",!0)]),ce,pe])])])]),p(fe,{title:"更新我的密码",modelValue:l.dialogVisible,"onUpdate:modelValue":t[7]||(t[7]=e=>l.dialogVisible=e),width:"450px","before-close":r.handleClose},{default:x((()=>[p(be,{model:l.ruleForm,rules:l.rules,ref:"ruleForm","label-width":"auto",class:"demo-ruleForm",size:"small"},{default:x((()=>[p(_e,{label:"请输出旧密码",prop:"old_pwd"},{default:x((()=>[p(y,{placeholder:"请输入旧密码",modelValue:l.ruleForm.old_pwd,"onUpdate:modelValue":t[3]||(t[3]=e=>l.ruleForm.old_pwd=e),type:"password"},null,8,["modelValue"])])),_:1}),p(_e,{label:"新密码",prop:"new_pwd1"},{default:x((()=>[p(y,{placeholder:"请输入新密码",modelValue:l.ruleForm.new_pwd1,"onUpdate:modelValue":t[4]||(t[4]=e=>l.ruleForm.new_pwd1=e),type:"password"},null,8,["modelValue"])])),_:1}),p(_e,{label:"再次输入新密码",prop:"new_pwd2"},{default:x((()=>[p(y,{placeholder:"请输入新密码",modelValue:l.ruleForm.new_pwd2,"onUpdate:modelValue":t[5]||(t[5]=e=>l.ruleForm.new_pwd2=e),type:"password"},null,8,["modelValue"])])),_:1}),p(_e,null,{default:x((()=>[p(v,{onClick:r.handleClose},{default:x((()=>[he])),_:1},8,["onClick"]),p(v,{type:"primary",onClick:t[6]||(t[6]=e=>r.submitChangePassword("ruleForm"))},{default:x((()=>[ge])),_:1})])),_:1})])),_:1},8,["model","rules"])])),_:1},8,["modelValue","before-close"])])}));y.render=_e,y.__scopeId="data-v-40e5b639";export default y;
